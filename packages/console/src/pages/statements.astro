---
import LayoutSidebar from '../app/LayoutSidebar.astro';

// Sample statements data - replace with actual data source
const statements = [
	{
		id: 'STMT-202502',
		period: 'February 2025',
		fromDate: '2025-02-01',
		toDate: '2025-02-28',
		totalTransactions: 15,
		totalDeposits: 5000.00,
		totalWithdrawals: 1200.00,
		totalInvestments: 3500.00,
		netBalance: 300.00,
		status: 'AVAILABLE'
	},
	{
		id: 'STMT-202501',
		period: 'January 2025',
		fromDate: '2025-01-01',
		toDate: '2025-01-31',
		totalTransactions: 23,
		totalDeposits: 8000.00,
		totalWithdrawals: 2500.00,
		totalInvestments: 5000.00,
		netBalance: 500.00,
		status: 'AVAILABLE'
	},
	{
		id: 'STMT-202412',
		period: 'December 2024',
		fromDate: '2024-12-01',
		toDate: '2024-12-31',
		totalTransactions: 18,
		totalDeposits: 6500.00,
		totalWithdrawals: 1800.00,
		totalInvestments: 4200.00,
		netBalance: 500.00,
		status: 'AVAILABLE'
	},
	{
		id: 'STMT-202411',
		period: 'November 2024',
		fromDate: '2024-11-01',
		toDate: '2024-11-30',
		totalTransactions: 12,
		totalDeposits: 4000.00,
		totalWithdrawals: 900.00,
		totalInvestments: 2800.00,
		netBalance: 300.00,
		status: 'AVAILABLE'
	},
	{
		id: 'STMT-202410',
		period: 'October 2024',
		fromDate: '2024-10-01',
		toDate: '2024-10-31',
		totalTransactions: 20,
		totalDeposits: 7200.00,
		totalWithdrawals: 1500.00,
		totalInvestments: 5400.00,
		netBalance: 300.00,
		status: 'AVAILABLE'
	}
];

const formatCurrency = (amount: number) => {
	return `RM ${amount.toLocaleString('en-MY', {
		minimumFractionDigits: 2,
		maximumFractionDigits: 2
	})}`;
};

const formatDate = (dateStr: string) => {
	return new Date(dateStr).toLocaleDateString('en-GB', {
		day: '2-digit',
		month: 'short',
		year: 'numeric'
	});
};
---

<LayoutSidebar>
	<div class="p-4 bg-white border-b border-gray-200 lg:mt-1.5 dark:bg-gray-800 dark:border-gray-700">
		<div class="mb-4">
			<h1 class="text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white">
				Statements
			</h1>
			<p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
				View and download your monthly account statements
			</p>
		</div>
	</div>

	<div class="px-4 pt-6">
		<!-- Generate Statement Section -->
		<div class="mb-4">
			<div class="p-6 rounded-lg" style="background-color: #EFF6FF;">
				<div class="flex items-center justify-between">
					<h2 class="text-xl font-bold text-gray-900">Generate Custom Statement</h2>
					<form>
						<div class="flex items-center space-x-4">
							<div class="flex items-center space-x-2">
								<label class="block text-gray-700 text-sm font-medium">Transaction Period:</label>
								<span class="text-gray-700">from</span>
								<input
									type="date"
									class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-auto p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
								/>
								<span class="text-gray-700">to</span>
								<input
									type="date"
									class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-auto p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
								/>
							</div>
							<button
								type="submit"
								class="px-5 py-2.5 text-sm font-medium text-white bg-primary-700 rounded-lg hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
							>
								Generate & Download
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Statements Table -->
		<div class="mb-4">
			<div
				class="p-4 bg-white border border-gray-200 rounded-lg shadow-sm sm:p-6 dark:border-gray-700 dark:bg-gray-800"
			>
				<div class="flex items-center justify-between mb-4">
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
						Monthly Statements
						<span
							class="ml-2 text-sm font-normal text-gray-500 dark:text-gray-400"
						>
							({statements.length} items)
						</span>
					</h3>
					<button
						type="button"
						class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-primary-700 rounded-lg hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
					>
						<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
						</svg>
						Export All
					</button>
				</div>

				<div class="overflow-x-auto">
					<table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
						<thead
							class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
						>
							<tr>
								<th scope="col" class="p-4">Statement ID</th>
								<th scope="col" class="p-4">Period</th>
								<th scope="col" class="p-4">Date Range</th>
								<th scope="col" class="p-4">Transactions</th>
								<th scope="col" class="p-4">Total Deposits</th>
								<th scope="col" class="p-4">Total Withdrawals</th>
								<th scope="col" class="p-4">Total Investments</th>
								<th scope="col" class="p-4">Net Balance</th>
								<th scope="col" class="p-4">Action</th>
							</tr>
						</thead>
						<tbody>
							{statements.map((statement) => (
								<tr class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
									<td class="p-4 font-medium text-gray-900 dark:text-white">
										{statement.id}
									</td>
									<td class="p-4 text-gray-900 dark:text-white">
										{statement.period}
									</td>
									<td class="p-4 text-gray-900 dark:text-white">
										<div class="text-xs">
											{formatDate(statement.fromDate)} - {formatDate(statement.toDate)}
										</div>
									</td>
									<td class="p-4 text-gray-900 dark:text-white text-center">
										{statement.totalTransactions}
									</td>
									<td class="p-4 font-mono text-green-600 dark:text-green-400">
										{formatCurrency(statement.totalDeposits)}
									</td>
									<td class="p-4 font-mono text-red-600 dark:text-red-400">
										{formatCurrency(statement.totalWithdrawals)}
									</td>
									<td class="p-4 font-mono text-blue-600 dark:text-blue-400">
										{formatCurrency(statement.totalInvestments)}
									</td>
									<td class="p-4 font-mono font-semibold text-gray-900 dark:text-white">
										{formatCurrency(statement.netBalance)}
									</td>
									<td class="p-4">
										<button
											type="button"
											class="inline-flex items-center px-3 py-1.5 text-xs font-medium text-center text-white bg-primary-700 rounded-lg hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
											title="Download Statement"
										>
											<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
												<path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
											</svg>
										</button>
									</td>
								</tr>
							))}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</LayoutSidebar>
